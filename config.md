# Configuration

Here you can see an explanation of what which option does

```
{
    "use_database": Set to false if you do not want to use a database *6,
    "default_token": The default token to use for requests if user is not logged in (STRING; recommended default: "0000000000"),
    "apply_roles_to_worker_owners": Roles to apply if the user has a worker running (ARRAY OF ROLE IDS),
    "apply_roles_to_trusted_users": Roles to apply if the useris trusted (ARRAY OF ROLE IDS),
    "advanced": {
        "dev": Whether this instance is for development or not (BOOLEAN) *4,
        "encrypt_token": Encrypt the users token before saving in the database (BOOLEAN) *9
        "pre_check_prompts_for_suspicion": {
            "enabled": Check if the prompt the user gave is suspicious and would get your IP banned (BOOLEAN) *10,
            "timeout_duration": The duration to put the user into timeout for
        }
    },
    "filter_actions": {
        "mode": The mode on how the guilds list should act ('whitelist' or 'blacklist'),
        "guilds": The list of guilds to apply the filters to (ARRAY OF GUILD IDS),
        "apply_filter_to": {
            "react_to_transfer": Whether to apply the filter to this action (BOOLEAN),
            "apply_roles_to_worker_owners": Whether to apply the filter to this action (BOOLEAN),
            "apply_roles_to_trusted_users": Whether to apply the filter to this action (BOOLEAN)
        }
    },
    "react_to_transfer": {
        "enabled": Whether transferring kudos by reacting is enabled (BOOLEAN),
        "emojis": [
            {
                "id": The ID of the Emoji (STRING),
                "amount": The amount to transfer when reacted (NUMBER),
                "title": The title of the emoji transfer (STRING) (OPTIONAL),
                "message": The message of the emoji transfer (STRING) (OPTIONAL)
            }
        ],
        "emojis" can be an infinitely long list with emojis, if there are duplicate emoji ids always the first will get used
        "allow_delayed_claim": When set to true the transaction is done as soon as the targeted user is logged in
    },
    "logs": {
        "enabled": Whether logging in files are enabled (BOOLEAN),
        "directory": Which directory to create the logs in (STRING; default: "/logs"),
        "plain": Set to true if you want to have logs in the form of a .TXT file (BOOLEAN),
        "csv": Set to true if you want to have logs in the form of a .CSV file (BOOLEAN),
        "log_actions": {
            "non_img2img": Set to true if you want to log generations without image to image (BOOLEAN),
            "img2img": Set to true if you want to log generations with image to image (BOOLEAN)
        }
    },
    "interrogate": {
        "enabled": Whether the interrogate command is enabled (BOOLEAN),
        "update_interrogation_status_interval_seconds": The interval at which the embed in Discord gets updated (INTEGER),
        "enable_user_captioning" Whether users can use the context command to caption other users profile pictures (BOOLEAN),
        "default": {
            "nsfw": If no choice is given interrogate if image is nsfw (BOOLEAN) *1,
            "caption": If no choice is given create a caption for the image (BOOLEAN) *1,
            "interrogation": If no choice is given interrogate the image (BOOLEAN) *1,
        },
        "user_restrictions": {
            "allow_nsfw": Allow users to interrogate for nsfw (BOOLEAN),
            "allow_caption": Allow users to create a caption (BOOLEAN),
            "allow_interrogation": Allow users to get an interrogation result (BOOLEAN)
        }
    },
    "advanced_generate": {
        "enabled": Whether the generate command is enabled (BOOLEAN),
        "require_login": Set to true if you want the user to log in with their stable horde token (BOOLEAN),
        "trusted_workers": Whether to only use trusted workers (BOOLEAN) *1,
        "censor_nsfw": Whether to censor NSFW images if they were generated by accident (BOOLEAN) *1,
        "blacklisted_models": A list of blacklisted models which users are not allowed to use (ARRAY OF STRING),
        "blacklisted_words": A list of blacklisted words which users are not allowed to use (ARRAY OF STRING),
        "update_generation_status_interval_seconds": The interval at which the embed in Discord gets updated (INTEGER),
        "convert_a1111_weight_to_horde_weight": Whether to convert a1111 to weighted prompt required by the api (BOOLEAN) *7 *8,
        "improve_loading_time": Try to improve the displaying time between generation finished and generation displayed in discord (BOOLEAN) *7
        "default": {
            "tiling": Whether the result should be tileable if nothing is specified (BOOLEAN) *1,
            "steps": How many steps to go through by default if nothing is specified (INTEGER) *1,
            "resolution": {
                "width": The default outputs width (INTEGER) *1,
                "height": The default outputs height (INTEGER) *1
            },
            "amount": The default amount of images to generate (INTEGER) *1,
            "cfg": The cfg value to use for generation (INTEGER) *1,
            "sampler": The default sampler to use (STRING) *1 *2,
            "model": The default model to use for generation (STRING) *1 *3,
            "denoise": The default denoise strength to use in % (NUMBER; 0-100) *1,
            "gfpgan": The default for gfpgan (BOOLEAN) *1,
            "real_esrgan:" The default for real_esrgan (BOOLEAN) *1,
            "karras:" The default for karras (BOOLEAN) *1,
            "share:" The default for sharing the result (BOOLEAN) *1,
        },
        "img2img": {
            "require_login": Whether the user has to be logged in to use image to image (BOOLEAN),
            "require_stable_horde_account_oauth_connection": Whether the user has to have a stable horde account with an oauth connection (e.g. Discord) (BOOLEAN),
            "allow_non_webp": Whether to allow other image formats other than webp (BOOLEAN),
            "require_nsfw_channel": Set to true if the channel the command is used in has to be marked as age restricted (BOOLEAN),
            "whitelist": {
                "only_allow_whitelist": Whether only users in the whitelist can use image to image (BOOLEAN),
                "user_ids": List of users ids who are whitelisted (ARRAY OF DISCORD USER IDS),
                "bypass_checks": Set to true if whitelisted users should bypass the restrictions above (BOOLEAN)
            }
        },
        "user_restrictions": {
            "width": {
                "min": The minimum width the user can input into the /generate command (INTEGER; DEFAULT: 64),
                "max": The maximum width the user can input into the /generate command (INTEGER; DEFAULT: 1024)
            },
            "height": {
                "min": The minimum height the user can input into the /generate command (INTEGER; DEFAULT: 64),
                "max": The maximum height the user can input into the /generate command (INTEGER; DEFAULT: 1024)
            },
            "amount": {
                "max": The maximum amount of images a user can generate (INTEGER; DEFAULT: 1)
            },
            "steps": {
                "min": The minimum steps the user can input into the /generate command (INTEGER; DEFAULT: 1),
                "max": The maximum steps the user can input into the /generate command (INTEGER; DEFAULT: 100)
            },
            "cfg": {
                "min": The minimum cfg the user can input into the /generate command (INTEGER; DEFAULT: -40),
                "max": The maximum cfg the user can input into the /generate command (INTEGER; DEFAULT: 30)
            },
            "denoise": {
                "min": The minimum denoising strength the user can input into the /generate command (INTEGER; DEFAULT: 0),
                "max": The maximum denoising strength the user can input into the /generate command (INTEGER; DEFAULT: 100)
            },
            "allow_sampler": (BOOLEAN) *5
            "allow_cfg": (BOOLEAN) *5,
            "allow_seed": (BOOLEAN) *5,
            "allow_height": (BOOLEAN) *5,
            "allow_width": (BOOLEAN) *5,
            "allow_gfpgan": (BOOLEAN) *1 *5,
            "allow_real_esrgan": (BOOLEAN) *1 *5,
            "allow_seed_variation": (BOOLEAN) *5,
            "allow_tiling": (BOOLEAN) *5,
            "allow_steps": (BOOLEAN) *5,
            "allow_amount": (BOOLEAN) *5,
            "allow_models": (BOOLEAN) *5,
            "allow_img2img": (BOOLEAN) *5,
            "allow_denoise": (BOOLEAN) *5,
            "allow_karras": (BOOLEAN) * 5,
            "allow_nsfw": Set to true if you want to allow NSFW image generation for your users (BOOLEAN),
            "allow_sharing": (BOOLEAN) *5,
            "allow_rating": Allow the user to rate their generated images (BOOLEAN)
        }
    },
    "generate": {
        "enabled": Whether the generate command is enabled (BOOLEAN),
        "require_login": Set to true if you want the user to log in with their stable horde token (BOOLEAN),
        "trusted_workers": Whether to only use trusted workers (BOOLEAN) *1,
        "censor_nsfw": Whether to censor NSFW images if they were generated by accident (BOOLEAN) *1,
        "blacklisted_styles": A list of blacklisted styles which users are not allowed to use (ARRAY OF STRING),
        "blacklisted_words": A list of blacklisted words which users are not allowed to use (ARRAY OF STRING),
        "update_generation_status_interval_seconds": The interval at which the embed in Discord gets updated (INTEGER),
        "convert_a1111_weight_to_horde_weight": Whether to convert a1111 to weighted prompt required by the api (BOOLEAN) *7 *8,
        "improve_loading_time": Try to improve the displaying time between generation finished and generation displayed in discord (BOOLEAN) *7
        "styles_source": The default source where to fetch the styles from (STRING) *11,
        "default": {
            "tiling": Whether the result should be tileable if nothing is specified (BOOLEAN) *1,
            "share:" The default for sharing the result (BOOLEAN) *1,
            "amount": The default amount of images to generate (INTEGER) *1,
            "style": The name of the style to use as a default (STRING)
        },
        "user_restrictions": {
            "amount": {
                "max": The maximum amount of images a user can generate (INTEGER; DEFAULT: 1)
            },
            
            "allow_negative_prompt": (BOOLEAN) *5,
            "allow_style": (BOOLEAN) *5,
            "allow_tiling": (BOOLEAN) *5,
            "allow_amount": (BOOLEAN) *5,
            "allow_nsfw": Set to true if you want to allow NSFW image generation for your users (BOOLEAN),
            "allow_sharing": (BOOLEAN) *5,
            "allow_rating": Allow the user to rate their generated images (BOOLEAN)
        }
    }
}
```

`*1` See API Documentation for reference (https://stablehorde.net/api)  
`*2` Available Samplers: k_lms, k_heun, k_euler, k_euler_a, k_dpm_2, k_dpm_2_a, DDIM, PLMS, k_dpm_fast, k_dpm_adaptive, k_dpmpp_2s_a, k_dpmpp_2m, dpmsolver  
`*3` Not all models are available at all times *1  
`*4` Developer mode will enable logging and will also show the generations ID in the embed in Discord  
`*5` This option changes how the command is created. If set to false the user will not have the option to modify this value when generating.  
`*6` This option must be set to false, leaving it blank will default it to true  
`*7` EXPERIMENTAL OPTION, ENABLE AT YOUR OWN RISK  
`*8` For example (((test))) will be automatically converted to (test:1.3)  
`*9` Uses an encryption key only known to you to encrypt the users tokens. This is recommended to increase security. Enabling this option may have an impact on speed.  
`*10` This Option requires a `OPERATOR_API_KEY` to be set in the `.env`  
`*11` Must follow the scheme of https://github.com/db0/Stable-Horde-Styles/blob/main/styles.json  